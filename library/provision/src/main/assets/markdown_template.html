<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="file:///android_asset/github_style.css">
    <script src="file:///android_asset/marked.min.js"></script>
</head>
<body style="background-color: transparent;">
<div id="content"></div>
<div id="retry-container" style="display:none; text-align:center; margin-top:50px;">
    <p style="color:#666;">加载失败</p>
    <button onclick="Android.retry()" style="padding:10px 20px;">点击重试</button>
</div>
<script>
    function decodeAndParse(base64Str) {
        try {
            // 1. 解码 Base64（处理中文乱码）
            var decodedMd = decodeURIComponent(escape(window.atob(base64Str)));

            // 2. 检查 marked 库是否加载
            if (typeof marked !== 'undefined') {
                // 使用 marked.parse 进行渲染
                document.getElementById('content').innerHTML = marked.parse(decodedMd);
            } else {
                document.getElementById('content').innerHTML = "Error: marked.js not loaded";
            }
        } catch (e) {
            document.getElementById('content').innerHTML = "Parse Error: " + e.message;
        }
    }
</script>

</body>
</html>
